{"version":3,"sources":["SocketContext.js","components/Messenger.jsx","components/VideoPlayer.jsx","components/Options.jsx","components/Notifications.jsx","routes/CreateRoom.js","routes/Room.js","components/Navbar.jsx","App.js","index.js"],"names":["SocketContext","createContext","socket","io","ContextProvider","children","useState","callAccepted","setCallAccepted","callEnded","setCallEnded","stream","setStream","name","setName","call","setCall","me","setMe","myVdoStatus","setMyVdoStatus","userVdoStatus","setUserVdoStatus","myMicStatus","setMyMicStatus","userMicStatus","setUserMicStatus","screenShare","setScreenShare","setMsgRcv","myVideo","useRef","userVideo","connectionRef","useEffect","navigator","mediaDevices","getUserMedia","video","audio","then","currentStream","current","srcObject","on","id","from","callerName","signal","isReceivingCall","type","currentMediaStatus","window","location","reload","value","msg","sender","setTimeout","Provider","callUser","peer","Peer","initiator","trickle","data","emit","userToCall","signalData","leaveCall","destroy","shareScreen","getDisplayMedia","cursor","videoTrack","getVideoTracks","replaceTrack","streams","onended","answerCall","to","myMediaStatus","stopScreenShare","updateVideo","currentStatus","enabled","updateMic","getAudioTracks","Messenger","message","state","setState","chat","setChat","socketRef","connect","disconnect","onTextChange","e","target","className","onSubmit","preventDefault","TextField","onChange","label","variant","map","index","useStyles","makeStyles","theme","uservideo","width","breakpoints","down","myvideo","gridContainer","justifyContent","flexDirection","paper","padding","border","margin","VideoPlayer","useContext","classes","Grid","container","Paper","item","xs","sm","Typography","gutterBottom","playsInline","muted","ref","autoPlay","Button","style","color","onClick","tabIndex","Videocam","VideocamOffSharp","Mic","MicOff","StopScreenShare","ScreenShareSharp","root","display","marginTop","Options","idToCall","setIdToCall","noValidate","autoComplete","md","fullWidth","console","log","text","startIcon","Assignment","fontSize","PhoneDisabled","Phone","Notifications","CreateRoom","props","uuid","history","push","Container","styled","div","StyledVideo","Video","videoConstraints","height","innerHeight","innerWidth","Room","peers","setPeers","peersRef","users","forEach","userID","userToSignal","callerID","createPeer","peerID","payload","incomingSignal","addPeer","find","p","wrapper","Nav_bar","Navbar","bg","Brand","href","Nav","Link","appBar","borderRadius","alignItems","backgroundcolor","image","marginLeft","App","path","exact","component","ReactDOM","render","document","getElementById"],"mappings":"qXAIMA,EAAgBC,0BAEfC,EAASC,aAAG,iDAEbC,EAAkB,SAAC,GAAkB,IAAhBC,EAAe,EAAfA,SACzB,EAAwCC,oBAAS,GAAjD,mBAAOC,EAAP,KAAqBC,EAArB,KACA,EAAkCF,oBAAS,GAA3C,mBAAOG,EAAP,KAAkBC,EAAlB,KACA,EAA4BJ,qBAA5B,mBAAOK,EAAP,KAAeC,EAAf,KACA,EAAwBN,mBAAS,IAAjC,mBAAOO,EAAP,KAAaC,EAAb,KACA,EAAwBR,mBAAS,IAAjC,mBAAOS,EAAP,KAAaC,EAAb,KACA,EAAoBV,mBAAS,IAA7B,mBAAOW,EAAP,KAAWC,EAAX,KACA,EAAsCZ,oBAAS,GAA/C,mBAAOa,EAAP,KAAoBC,EAApB,KACA,EAA0Cd,qBAA1C,mBAAOe,EAAP,KAAsBC,EAAtB,KACA,EAAsChB,oBAAS,GAA/C,mBAAOiB,EAAP,KAAoBC,EAApB,KACA,EAA0ClB,qBAA1C,mBAAOmB,EAAP,KAAsBC,EAAtB,KACA,EAAsCpB,oBAAS,GAA/C,mBAAOqB,EAAP,KAAoBC,EAApB,KACA,EAA4BtB,mBAAS,IAArC,mBAAeuB,IAAf,WAOMC,GAAUC,mBACVC,GAAYD,mBACZE,GAAgBF,mBAGtBG,qBAAU,WACRC,UAAUC,aAAaC,aAAa,CAAEC,OAAO,EAAMC,OAAO,IACvDC,MAAK,SAACC,GACL7B,EAAU6B,GACVX,GAAQY,QAAQC,UAAYF,KAGhCvC,EAAO0C,GAAG,MAAM,SAACC,GAAD,OAAQ3B,EAAM2B,MAE9B3C,EAAO0C,GAAG,YAAY,YAAyC,IAAtCE,EAAqC,EAArCA,KAAYC,EAAyB,EAA/BlC,KAAkBmC,EAAa,EAAbA,OAC/ChC,EAAQ,CAAEiC,iBAAiB,EAAMH,OAAMjC,KAAMkC,EAAYC,cAE3D9C,EAAO0C,GAAG,mBAAmB,YAAmC,IAAhCM,EAA+B,EAA/BA,KAAMC,EAAyB,EAAzBA,mBACpC,GAA2B,OAAvBA,GAA+BA,IAAuB,GACxD,OAAQD,GACN,IAAK,QACH5B,EAAiB6B,GACjB,MACF,IAAK,MACHzB,EAAiByB,GACjB,MACF,QACEzB,EAAiByB,EAAmB,IACpC7B,EAAiB6B,EAAmB,QAK5CjD,EAAO0C,GAAG,WAAW,WACnBQ,OAAOC,SAASC,YAGlBpD,EAAO0C,GAAG,UAAU,YAAkC,EAA/B/B,KAAgC,IAArB0C,EAAoB,EAAzBC,IAAYC,EAAa,EAAbA,OACvC5B,GAAU,CAAE0B,QAAOE,WACnBC,YAAW,WACT7B,GAAU,MACT,UAEJ,IAiHH,OACE,cAAC7B,EAAc2D,SAAf,CAAwBJ,MAAO,CAC7BxC,OACAR,eACAuB,WACAE,aACArB,SACAE,OACAC,UACAL,YACAQ,KACA2C,SAvGa,SAACf,GAChB,IAAMgB,EAAO,IAAIC,IAAK,CAAEC,WAAW,EAAMC,SAAS,EAAOrD,WAEzDkD,EAAKjB,GAAG,UAAU,SAACqB,GACjB/D,EAAOgE,KAAK,WAAY,CAAEC,WAAYtB,EAAIuB,WAAYH,EAAMnB,KAAM7B,EAAIJ,YAGxEgD,EAAKjB,GAAG,UAAU,SAACH,GACjBT,GAAUU,QAAQC,UAAYF,KAGhCvC,EAAO0C,GAAG,gBAAgB,SAACI,GACzBxC,GAAgB,GAEhBqD,EAAKb,OAAOA,GACZ9C,EAAOgE,KAAK,gBAAiB,CAC3BhB,KAAM,OACNC,mBAAoB,CAAC5B,EAAaJ,QAItCc,GAAcS,QAAUmB,GAmFtBQ,UA5Dc,WAChB3D,GAAa,GAEbuB,GAAcS,QAAQ4B,UAEtBlB,OAAOC,SAASC,UAwDdiB,YAnDgB,WAClBpC,UAAUC,aAAaoC,gBAAgB,CAACC,QAAQ,IAC/CjC,MAAK,SAAAC,GACFb,GAAe,GACfhB,EAAUD,GACVmB,GAAQY,QAAQC,UAAYF,EAC5B,IAAMiC,EAAajC,EAAckC,iBAAiB,GAC5Cd,EAAO5B,GAAcS,QACxBmB,GACCA,EAAKe,aACDf,EAAKgB,QAAQ,GAAGF,iBAAiB,GACjCD,EACAb,EAAKgB,QAAQ,IAGrBH,EAAWI,QAAU,WACjBjB,EAAKe,aACDf,EAAKgB,QAAQ,GAAGF,iBAAiB,GACjChE,EAAOgE,iBAAiB,GACxBd,EAAKgB,QAAQ,IAEjB/C,GAAQY,QAAQC,UAAYhC,OA+BlCoE,WA7He,WACjBvE,GAAgB,GAChB,IAAMqD,EAAO,IAAIC,IAAK,CAAEC,WAAW,EAAOC,SAAS,EAAOrD,WAE1DkD,EAAKjB,GAAG,UAAU,SAACqB,GACjB/D,EAAOgE,KAAK,aAAc,CAAElB,OAAQiB,EAAMe,GAAIjE,EAAK+B,KAAOI,KAAM,OAChE+B,cAAe,CAAC1D,EAAaJ,QAG/B0C,EAAKjB,GAAG,UAAU,SAACH,GACjBT,GAAUU,QAAQC,UAAYF,KAGhCoB,EAAKb,OAAOjC,EAAKiC,QAEjBf,GAAcS,QAAUmB,GA+GtBqB,gBA3BkB,WACpBtD,GAAe,GACf,IAAMiC,EAAO5B,GAAcS,QAC3BmB,EAAKe,aACDf,EAAKgB,QAAQ,GAAGF,iBAAiB,GACjChE,EAAOgE,iBAAiB,GACxBd,EAAKgB,QAAQ,IAEjB/C,GAAQY,QAAQC,UAAYhC,GAoB1BS,iBACAO,cACAN,gBACAC,mBACA6D,YAxFgB,WAClB/D,GAAe,SAACgE,GAMd,OALAlF,EAAOgE,KAAK,gBAAiB,CAC3BhB,KAAM,QACNC,oBAAqBiC,IAEvBzE,EAAOgE,iBAAiB,GAAGU,SAAWD,GAC9BA,MAkFR7D,cACAE,gBACA6D,UAjFc,WAChB9D,GAAe,SAAC4D,GAMd,OALAlF,EAAOgE,KAAK,gBAAiB,CAC3BhB,KAAM,MACNC,oBAAqBiC,IAEvBzE,EAAO4E,iBAAiB,GAAGF,SAAWD,GAC9BA,OAoDV,SAyBG/E,K,yCCzIQmF,I,IAAAA,EAjEf,WACC,MAA4BlF,mBAAS,CAAEmF,QAAS,GAAI5E,KAAM,KAA1D,mBAAQ6E,EAAR,KAAeC,EAAf,KACA,EAA0BrF,mBAAS,IAAnC,mBAAQsF,EAAR,KAAcC,EAAd,KAEMC,EAAY/D,mBAElBG,qBACC,WAKC,OAJA4D,EAAUpD,QAAUvC,IAAG4F,QAAQ,iDAC/BD,EAAUpD,QAAQE,GAAG,WAAW,YAAwB,IAArB/B,EAAoB,EAApBA,KAAM4E,EAAc,EAAdA,QACxCI,EAAQ,GAAD,mBAAMD,GAAN,CAAY,CAAE/E,OAAM4E,iBAErB,kBAAMK,EAAUpD,QAAQsD,gBAEhC,CAAEJ,IAGH,IAAMK,EAAe,SAACC,GACrBP,EAAS,2BAAKD,GAAN,kBAAcQ,EAAEC,OAAOtF,KAAOqF,EAAEC,OAAO5C,UAoBhD,OACC,sBAAK6C,UAAU,QAAf,UACC,uBAAMC,SAnBgB,SAACH,GACxB,IAAQrF,EAAkB6E,EAAlB7E,KAAM4E,EAAYC,EAAZD,QACdK,EAAUpD,QAAQwB,KAAK,UAAW,CAAErD,OAAM4E,YAC1CS,EAAEI,iBACFX,EAAS,CAAEF,QAAS,GAAI5E,UAevB,UACC,2CACA,qBAAKuF,UAAU,aAAf,SACC,cAACG,EAAA,EAAD,CAAW1F,KAAK,OAAO2F,SAAU,SAACN,GAAD,OAAOD,EAAaC,IAAI3C,MAAOmC,EAAM7E,KAAM4F,MAAM,eAEnF,8BACC,cAACF,EAAA,EAAD,CACC1F,KAAK,UACL2F,SAAU,SAACN,GAAD,OAAOD,EAAaC,IAC9B3C,MAAOmC,EAAMD,QACb5C,GAAG,4BACH6D,QAAQ,WACRD,MAAM,cAGR,qDAED,sBAAKL,UAAU,cAAf,UACC,0CA7BKR,EAAKe,KAAI,WAAoBC,GAApB,IAAG/F,EAAH,EAAGA,KAAM4E,EAAT,EAASA,QAAT,OACf,8BACC,+BACE5E,EADF,KACS,+BAAO4E,QAFPmB,aC9BPC,EAAYC,aAAW,SAACC,GAAD,MAAY,CACvCC,UAAU,aACRC,MAAO,SACNF,EAAMG,YAAYC,KAAK,MAAQ,CAC9BF,MAAO,UAGXG,QAAQ,aACNH,MAAO,SACNF,EAAMG,YAAYC,KAAK,MAAQ,CAC9BF,MAAO,UAGXI,cAAc,aACZC,eAAgB,UACfP,EAAMG,YAAYC,KAAK,MAAQ,CAC9BI,cAAe,WAGnBC,MAAO,CACLC,QAAS,OACTC,OAAQ,kBACRC,OAAQ,YAgFGC,EA5EK,WAClB,MAGgGC,qBAAW7H,GAHnGa,EAAR,EAAQA,KAAMN,EAAd,EAAcA,aAAcuB,EAA5B,EAA4BA,QAC1BqD,EADF,EACEA,YACA5D,EAFF,EAEEA,YACC+D,EAHH,EAGGA,UAAWtD,EAHd,EAGcA,UAAWvB,EAHzB,EAGyBA,UAAW8D,EAHpC,EAGoCA,YAAa5C,EAHjD,EAGiDA,YAAauD,EAH9D,EAG8DA,gBAAiBvE,EAH/E,EAG+EA,OAAQI,EAHvF,EAGuFA,KACjF+G,EAAUjB,IAEhB,OAEE,eAACkB,EAAA,EAAD,CAAMC,WAAS,EAAC5B,UAAW0B,EAAQT,cAAnC,UACG1G,GAEC,eAACsH,EAAA,EAAD,CAAO7B,UAAW0B,EAAQN,MAA1B,UACE,eAACO,EAAA,EAAD,CAAMG,MAAI,EAACC,GAAI,EAAGC,GAAI,EAAtB,UACE,cAACC,EAAA,EAAD,CAAY3B,QAAQ,KAAK4B,cAAY,EAArC,SAAuCzH,GAAQ,SAC/C,uBAAO0H,aAAW,EAACC,OAAK,EAACC,IAAK3G,EAAS4G,UAAQ,EAACtC,UAAW0B,EAAQV,aAGrE,cAACuB,EAAA,EAAD,CAAQC,MAAO,CAAEC,MAAO,QAAxB,SACE,sBAAMzC,UAAU,QAAQ0C,QAAS,kBAAM3D,KAAe4D,SAAS,IAA/D,SACGjH,EACC,cAACkH,EAAA,EAAD,CAAUJ,MAAO,CAAEC,MAAO,aAE1B,cAACI,EAAA,EAAD,CAAkBL,MAAO,CAAEC,MAAO,aAIxC,cAACF,EAAA,EAAD,CAAQC,MAAO,CAAEC,MAAO,QAAxB,SACE,sBAAMzC,UAAU,QAAQ0C,QAAS,kBAAMxD,KAAayD,SAAS,IAA7D,SACGxH,EACC,cAAC2H,EAAA,EAAD,CAAKN,MAAO,CAAEC,MAAO,aAErB,cAACM,EAAA,EAAD,CAAQP,MAAO,CAAEC,MAAO,aAM3BlH,EACyB,cAACgH,EAAA,EAAD,CAAQC,MAAO,CAAEC,MAAO,QAAxB,SACA,uBAAMzC,UAAU,QAAQ0C,QAAS,kBAAM5D,KAAmB6D,SAAS,IAAnE,cAEI,cAACK,EAAA,EAAD,CAAiBR,MAAO,CAAEC,MAAO,aAFrC,SASF,cAACF,EAAA,EAAD,CAAQC,MAAO,CAAEC,MAAO,QAAxB,SACE,uBAAMzC,UAAU,QAAQ0C,QAAS,kBAAMvE,KAAewE,SAAS,IAA/D,cAEI,cAACM,EAAA,EAAD,CAAkBT,MAAO,CAAEC,MAAO,aAFtC,YAW/BtI,IAAiBE,GAEhB,cAACwH,EAAA,EAAD,CAAO7B,UAAW0B,EAAQN,MAA1B,SACE,eAACO,EAAA,EAAD,CAAMG,MAAI,EAACC,GAAI,EAAGC,GAAI,EAAtB,UACE,cAACC,EAAA,EAAD,CAAY3B,QAAQ,KAAK4B,cAAY,EAArC,SAAuCvH,EAAKF,MAAQ,SACpD,uBAAO0H,aAAW,EAACE,IAAKzG,EAAW0G,UAAQ,EAACtC,UAAW0B,EAAQd,iBAKvE,cAAC,EAAD,Q,oCC/FEH,EAAYC,aAAW,SAACC,GAAD,MAAY,CACvCuC,KAAM,CACJC,QAAS,OACThC,cAAe,UAEjBF,cAAc,aACZJ,MAAO,QACNF,EAAMG,YAAYC,KAAK,MAAQ,CAC9BI,cAAe,WAInBS,UAAU,aACRf,MAAO,QACPU,OAAQ,QACRF,QAAS,GACRV,EAAMG,YAAYC,KAAK,MAAQ,CAC9BF,MAAO,SAGXU,OAAQ,CACN6B,UAAW,IAEb/B,QAAS,CACPA,QAAS,IAEXD,MAAO,CACLC,QAAS,YACTC,OAAQ,uBAgDG+B,EA5CC,SAAC,GAAkB,IAAhBpJ,EAAe,EAAfA,SACjB,EAA4EwH,qBAAW7H,GAA/EiB,EAAR,EAAQA,GAAIV,EAAZ,EAAYA,aAAcM,EAA1B,EAA0BA,KAAMC,EAAhC,EAAgCA,QAASL,EAAzC,EAAyCA,UAAW4D,EAApD,EAAoDA,UAAWT,EAA/D,EAA+DA,SAC/D,EAAgCtD,mBAAS,IAAzC,mBAAOoJ,EAAP,KAAiBC,EAAjB,KACM7B,EAAUjB,IAEhB,OACE,qBAAKT,UAAW0B,EAAQE,UAAxB,SACE,eAACC,EAAA,EAAD,CAAO7B,UAAW0B,EAAQN,MAA1B,UACE,sBAAMpB,UAAW0B,EAAQwB,KAAMM,YAAU,EAACC,aAAa,MAAvD,SACE,eAAC9B,EAAA,EAAD,CAAMC,WAAS,EAAC5B,UAAW0B,EAAQT,cAAnC,UACE,eAACU,EAAA,EAAD,CAAMG,MAAI,EAACC,GAAI,GAAI2B,GAAI,EAAG1D,UAAW0B,EAAQL,QAA7C,UACE,cAACY,EAAA,EAAD,CAAYC,cAAY,EAAC5B,QAAQ,KAAjC,0BACA,cAACH,EAAA,EAAD,CAAWE,MAAM,OAAOlD,MAAO1C,EAAM2F,SAAU,SAACN,GAAD,OAAOpF,EAAQoF,EAAEC,OAAO5C,QAAQwG,WAAS,IACvFC,QAAQC,IAAIhJ,GAGb,cAAC,kBAAD,CAAiBiJ,KAAMjJ,EAAImF,UAAW0B,EAAQH,OAA9C,SACE,cAACgB,EAAA,EAAD,CAAQjC,QAAQ,YAAYmC,MAAM,UAAWsB,UAAW,cAACC,EAAA,EAAD,CAAYC,SAAS,UAA7E,+BAMJ,eAACtC,EAAA,EAAD,CAAMG,MAAI,EAACC,GAAI,GAAI2B,GAAI,EAAG1D,UAAW0B,EAAQL,QAA7C,UACE,cAACY,EAAA,EAAD,CAAYC,cAAY,EAAC5B,QAAQ,KAAjC,yBACA,cAACH,EAAA,EAAD,CAAWE,MAAM,aAAalD,MAAOmG,EAAUlD,SAAU,SAACN,GAAD,OAAOyD,EAAYzD,EAAEC,OAAO5C,QAAQwG,WAAS,IACrGxJ,IAAiBE,EAChB,cAACkI,EAAA,EAAD,CAAQjC,QAAQ,YAAYmC,MAAM,YAAYsB,UAAW,cAACG,EAAA,EAAD,CAAeD,SAAS,UAAYN,WAAS,EAACjB,QAASzE,EAAW+B,UAAW0B,EAAQH,OAA9I,qBAIA,cAACgB,EAAA,EAAD,CAAQjC,QAAQ,YAAYmC,MAAM,UAAUsB,UAAW,cAACI,EAAA,EAAD,CAAOF,SAAS,UAAYvB,QAAS,kBAAMlF,EAAS8F,IAAYtD,UAAW0B,EAAQH,OAA1I,gCAOPtH,QCrDMmK,EApBO,WACpB,MAAsD3C,qBAAW7H,GAAzD+E,EAAR,EAAQA,WAAYhE,EAApB,EAAoBA,KAAMR,EAA1B,EAA0BA,aAAc8D,EAAxC,EAAwCA,UAExC,OACE,mCACGtD,EAAKkC,kBAAoB1C,GACxB,sBAAKqI,MAAO,CAAEW,QAAS,OAAQjC,eAAgB,gBAA/C,UACE,+BAAKvG,EAAKF,KAAV,mBACA,cAAC8H,EAAA,EAAD,CAAQjC,QAAQ,YAAYmC,MAAM,UAAUC,QAAS/D,EAArD,oBAGA,cAAC4D,EAAA,EAAD,CAAQjC,QAAQ,YAAYmC,MAAM,YAAYC,QAASzE,EAAvD,0B,0BCHKoG,EAXI,SAACC,GAMhB,OACI,wBAAQ5B,QANZ,WACI,IAAMjG,EAAK8H,cACXD,EAAME,QAAQC,KAAd,gBAA4BhI,KAI5B,0B,gBCLFiI,EAAYC,IAAOC,IAAV,kJASTC,EAAcF,IAAOzI,MAAV,+DAKX4I,EAAQ,SAACR,GACX,IAAMjC,EAAM1G,mBAQZ,OANAG,qBAAU,WACNwI,EAAM7G,KAAKjB,GAAG,UAAU,SAAAjC,GACpB8H,EAAI/F,QAAQC,UAAYhC,OAE7B,IAGC,cAACsK,EAAD,CAAa1C,aAAW,EAACG,UAAQ,EAACD,IAAKA,KAKzC0C,EAAmB,CACrBC,OAAQhI,OAAOiI,YAAc,EAC7BpE,MAAO7D,OAAOkI,WAAa,GAuFhBC,EApFF,SAACb,GACV,MAA0BpK,mBAAS,IAAnC,mBAAOkL,EAAP,KAAcC,EAAd,KACM3F,EAAY/D,mBACZC,EAAYD,mBACZ2J,EAAW3J,iBAAO,IAoExB,OAjEAG,qBAAU,WACN4D,EAAUpD,QAAUvC,IAAG4F,QAAQ,KAC/B5D,UAAUC,aAAaC,aAAa,CAAEC,MAAO6I,EAAkB5I,OAAO,IAAQC,MAAK,SAAA7B,GAC/EqB,EAAUU,QAAQC,UAAYhC,EAC9BmF,EAAUpD,QAAQwB,KAAK,aACvB4B,EAAUpD,QAAQE,GAAG,aAAa,SAAA+I,GAC9B,IAAMH,EAAQ,GACdG,EAAMC,SAAQ,SAAAC,GACV,IAAMhI,EA2BtB,SAAoBiI,EAAcC,EAAUpL,GACxC,IAAMkD,EAAO,IAAIC,IAAK,CAClBC,WAAW,EACXC,SAAS,EACTrD,WAOJ,OAJAkD,EAAKjB,GAAG,UAAU,SAAAI,GACd8C,EAAUpD,QAAQwB,KAAK,iBAAkB,CAAE4H,eAAcC,WAAU/I,cAGhEa,EAtCkBmI,CAAWH,EAAQ/F,EAAUpD,QAAQG,GAAIlC,GACtD+K,EAAShJ,QAAQmI,KAAK,CAClBoB,OAAQJ,EACRhI,SAEJ2H,EAAMX,KAAKhH,MAEf4H,EAASD,MAGb1F,EAAUpD,QAAQE,GAAG,eAAe,SAAAsJ,GAChC,IAAMrI,EA8BlB,SAAiBsI,EAAgBJ,EAAUpL,GACvC,IAAMkD,EAAO,IAAIC,IAAK,CAClBC,WAAW,EACXC,SAAS,EACTrD,WASJ,OANAkD,EAAKjB,GAAG,UAAU,SAAAI,GACd8C,EAAUpD,QAAQwB,KAAK,mBAAoB,CAAElB,SAAQ+I,gBAGzDlI,EAAKb,OAAOmJ,GAELtI,EA3CcuI,CAAQF,EAAQlJ,OAAQkJ,EAAQH,SAAUpL,GACvD+K,EAAShJ,QAAQmI,KAAK,CAClBoB,OAAQC,EAAQH,SAChBlI,SAGJ4H,GAAS,SAAAE,GAAK,4BAAQA,GAAR,CAAe9H,UAGjCiC,EAAUpD,QAAQE,GAAG,6BAA6B,SAAAsJ,GACjCR,EAAShJ,QAAQ2J,MAAK,SAAAC,GAAC,OAAIA,EAAEL,SAAWC,EAAQrJ,MACxDgB,KAAKb,OAAOkJ,EAAQlJ,gBAGlC,IAiCC,eAAC8H,EAAD,WACI,cAACG,EAAD,CAAazC,OAAK,EAACC,IAAKzG,EAAW0G,UAAQ,EAACH,aAAW,IACtDiD,EAAM7E,KAAI,SAAC9C,EAAM+C,GACd,OACI,cAAC,EAAD,CAAmB/C,KAAMA,GAAb+C,U,mBC1G1BC,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCuC,KAAM,CACJC,QAAS,OACThC,cAAe,UAEjBF,cAAc,aACZJ,MAAO,QACNF,EAAMG,YAAYC,KAAK,MAAQ,CAC9BI,cAAe,WAInBS,UAAU,aACRf,MAAO,QACPU,OAAQ,QACRF,QAAS,GACRV,EAAMG,YAAYC,KAAK,MAAQ,CAC9BF,MAAO,SAGXU,OAAQ,CACN6B,UAAW,IAEb/B,QAAS,CACPA,QAAS,IAEXD,MAAO,CACLC,QAAS,YACTC,OAAQ,mBAEV6E,QAAS,CAEPtF,MAAO,YAiCIuF,GA7BC,WACd,MAAgE3E,qBAAW7H,GAAxDS,GAAnB,EAAQsE,WAAR,EAAmBtE,WAAiBF,GAApC,EAA8BQ,KAA9B,EAAoCR,cAAc8D,EAAlD,EAAkDA,UAC5CyD,EAAUjB,KAChB,OACE,mCAEE,qBAAKT,UAAW0B,EAAQyE,QAAxB,SACJ,eAACE,EAAA,EAAD,CAAQC,GAAG,UAAUhG,QAAQ,OAA7B,UACE,cAAC+F,EAAA,EAAOE,MAAR,CAAcC,KAAK,IAAnB,4BACA,cAACC,GAAA,EAAD,CAAKzG,UAAU,UAAf,SACE,cAACyG,GAAA,EAAIC,KAAL,CAAUF,KAAK,QAAf,oBAEF,8BACCrM,IAAiBE,EACN,cAACkI,EAAA,EAAD,CAAQjC,QAAQ,YAAYmC,MAAM,YAAYsB,UAAW,cAACG,EAAA,EAAD,CAAeD,SAAS,UAAYvB,QAASzE,EAAW+B,UAAW0B,EAAQH,OAApI,qBAIA,kCCnDVd,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCgG,OAAO,aACLC,aAAc,GACdrF,OAAQ,aACR4B,QAAS,OACThC,cAAe,MACfD,eAAgB,SAChB2F,WAAY,OACZhG,MAAO,QACPS,OAAQ,kBACRwF,gBAAiB,QAChBnG,EAAMG,YAAYC,KAAK,MAAQ,CAC9BF,MAAO,QAGXkG,MAAO,CACLC,WAAY,QAEdb,QAAS,CACPhD,QAAS,OACThC,cAAe,SACf0F,WAAY,SACZhG,MAAO,YA0BIoG,GAtBH,WACV,IAAMvF,EAAUjB,KAEhB,OAEE,sBAAKT,UAAW0B,EAAQyE,QAAxB,UACC,cAAC,GAAD,IACA,cAAC,IAAD,UACC,eAAC,IAAD,WACE,cAAC,IAAD,CAAOe,KAAK,IAAIC,OAAK,EAACC,UAAW/C,IACjC,cAAC,IAAD,CAAO6C,KAAK,gBAAgBE,UAAWjC,SAIzC,cAAC,EAAD,IACA,cAAC,EAAD,IACA,cAAC,EAAD,Q,OC/CNkC,IAASC,OAEP,cAAC,EAAD,UACE,cAAC,GAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.d5c361d3.chunk.js","sourcesContent":["import React, { createContext, useState, useRef, useEffect } from 'react';\r\nimport { io } from 'socket.io-client';\r\nimport Peer from 'simple-peer';\r\n\r\nconst SocketContext = createContext();\r\n\r\n const socket = io('https://microsoft-engage-teams.herokuapp.com/');\r\n\r\nconst ContextProvider = ({ children }) => {\r\n  const [callAccepted, setCallAccepted] = useState(false);\r\n  const [callEnded, setCallEnded] = useState(false);\r\n  const [stream, setStream] = useState();\r\n  const [name, setName] = useState('');\r\n  const [call, setCall] = useState({});\r\n  const [me, setMe] = useState('');\r\n  const [myVdoStatus, setMyVdoStatus] = useState(true);\r\n  const [userVdoStatus, setUserVdoStatus] = useState();\r\n  const [myMicStatus, setMyMicStatus] = useState(true);\r\n  const [userMicStatus, setUserMicStatus] = useState();\r\n  const [screenShare, setScreenShare] = useState(false)\r\n  const [msgRcv, setMsgRcv] = useState(\"\");\r\n// message\r\n  //const [ state, setState ] = useState({ message: \"\", name: \"\" })\r\n//\tconst [ chat, setChat ] = useState([])\r\n\r\n//\tconst socketRef = useRef()\r\n//\r\n  const myVideo = useRef();\r\n  const userVideo = useRef();\r\n  const connectionRef = useRef();\r\n  \r\n\r\n  useEffect(() => {\r\n    navigator.mediaDevices.getUserMedia({ video: true, audio: true })\r\n      .then((currentStream) => {\r\n        setStream(currentStream);\r\n        myVideo.current.srcObject = currentStream;\r\n      });\r\n\r\n    socket.on('me', (id) => setMe(id));\r\n\r\n    socket.on('callUser', ({ from, name: callerName, signal }) => {\r\n      setCall({ isReceivingCall: true, from, name: callerName, signal });\r\n    });\r\n    socket.on(\"updateUserMedia\", ({ type, currentMediaStatus }) => {\r\n      if (currentMediaStatus !== null || currentMediaStatus !== []) {\r\n        switch (type) {\r\n          case \"video\":\r\n            setUserVdoStatus(currentMediaStatus);\r\n            break;\r\n          case \"mic\":\r\n            setUserMicStatus(currentMediaStatus);\r\n            break;\r\n          default:\r\n            setUserMicStatus(currentMediaStatus[0]);\r\n            setUserVdoStatus(currentMediaStatus[1]);\r\n            break;\r\n        }\r\n      }\r\n    });\r\n    socket.on(\"endCall\", () => {\r\n      window.location.reload();\r\n    });\r\n\r\n    socket.on(\"msgRcv\", ({ name, msg: value, sender }) => {\r\n      setMsgRcv({ value, sender });\r\n      setTimeout(() => {\r\n        setMsgRcv({});\r\n      }, 2000);\r\n    });\r\n  }, []);\r\n\r\n  const answerCall = () => {\r\n    setCallAccepted(true);\r\n    const peer = new Peer({ initiator: false, trickle: false, stream });\r\n\r\n    peer.on('signal', (data) => {\r\n      socket.emit('answerCall', { signal: data, to: call.from,  type: \"both\",\r\n      myMediaStatus: [myMicStatus, myVdoStatus], });\r\n    });\r\n\r\n    peer.on('stream', (currentStream) => {\r\n      userVideo.current.srcObject = currentStream;\r\n    });\r\n\r\n    peer.signal(call.signal);\r\n\r\n    connectionRef.current = peer;\r\n  };\r\n\r\n\r\n  const callUser = (id) => {\r\n    const peer = new Peer({ initiator: true, trickle: false, stream });\r\n\r\n    peer.on('signal', (data) => {\r\n      socket.emit('callUser', { userToCall: id, signalData: data, from: me, name });\r\n    });\r\n\r\n    peer.on('stream', (currentStream) => {\r\n      userVideo.current.srcObject = currentStream;\r\n    });\r\n\r\n    socket.on('callAccepted', (signal) => {\r\n      setCallAccepted(true);\r\n\r\n      peer.signal(signal);\r\n      socket.emit(\"updateMyMedia\", {\r\n        type: \"both\",\r\n        currentMediaStatus: [myMicStatus, myVdoStatus],\r\n      });\r\n    });\r\n\r\n    connectionRef.current = peer;\r\n  };\r\n  \r\n  const updateVideo = () => {\r\n    setMyVdoStatus((currentStatus) => {\r\n      socket.emit(\"updateMyMedia\", {\r\n        type: \"video\",\r\n        currentMediaStatus: !currentStatus,\r\n      });\r\n      stream.getVideoTracks()[0].enabled = !currentStatus;\r\n      return !currentStatus;\r\n    });\r\n  };\r\n  const updateMic = () => {\r\n    setMyMicStatus((currentStatus) => {\r\n      socket.emit(\"updateMyMedia\", {\r\n        type: \"mic\",\r\n        currentMediaStatus: !currentStatus,\r\n      });\r\n      stream.getAudioTracks()[0].enabled = !currentStatus;\r\n      return !currentStatus;\r\n    });\r\n  };\r\n  const leaveCall = () => {\r\n    setCallEnded(true);\r\n\r\n    connectionRef.current.destroy();\r\n\r\n    window.location.reload();\r\n  };\r\n   \r\n\r\n  \r\n  const shareScreen = () => {\r\n    navigator.mediaDevices.getDisplayMedia({cursor: true})\r\n    .then(currentStream => {\r\n        setScreenShare(true)\r\n        setStream(stream)\r\n        myVideo.current.srcObject = currentStream\r\n        const videoTrack = currentStream.getVideoTracks()[0]\r\n        const peer = connectionRef.current\r\n        if(peer) {\r\n            peer.replaceTrack(\r\n                peer.streams[0].getVideoTracks()[0], \r\n                videoTrack,\r\n                peer.streams[0]\r\n            )\r\n        }\r\n        videoTrack.onended = () => {\r\n            peer.replaceTrack (\r\n                peer.streams[0].getVideoTracks()[0], \r\n                stream.getVideoTracks()[0],\r\n                peer.streams[0]\r\n            )\r\n            myVideo.current.srcObject = stream\r\n        }\r\n        \r\n    })\r\n}\r\nconst stopScreenShare = () => {\r\n    setScreenShare(false)\r\n    const peer = connectionRef.current\r\n    peer.replaceTrack (\r\n        peer.streams[0].getVideoTracks()[0], \r\n        stream.getVideoTracks()[0],\r\n        peer.streams[0]\r\n    )\r\n    myVideo.current.srcObject = stream\r\n}\r\n  \r\n\r\n  return (\r\n    <SocketContext.Provider value={{\r\n      call,\r\n      callAccepted,\r\n      myVideo,\r\n      userVideo,\r\n      stream,\r\n      name,\r\n      setName,\r\n      callEnded,\r\n      me,\r\n      callUser,\r\n      leaveCall,\r\n      shareScreen,\r\n      answerCall,\r\n      stopScreenShare,\r\n      setMyVdoStatus,\r\n      screenShare,\r\n      userVdoStatus,\r\n      setUserVdoStatus,\r\n      updateVideo,\r\n      myMicStatus,\r\n      userMicStatus,\r\n      updateMic,\r\n    }}\r\n    >\r\n      {children}\r\n    </SocketContext.Provider>\r\n  );\r\n};\r\n\r\nexport { ContextProvider, SocketContext };","import React, { useState, useEffect, useRef } from 'react';\r\nimport io from 'socket.io-client';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport './messenger.css';\r\n//import { SocketContext } from '../SocketContext';\r\n//const socket = io('http://localhost:5000');\r\n\r\nfunction Messenger() {\r\n\tconst [ state, setState ] = useState({ message: \"\", name: \"\" })\r\n\tconst [ chat, setChat ] = useState([])\r\n\r\n\tconst socketRef = useRef()\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsocketRef.current = io.connect(\"https://microsoft-engage-teams.herokuapp.com/\")\r\n\t\t\tsocketRef.current.on(\"message\", ({ name, message }) => {\r\n\t\t\t\tsetChat([ ...chat, { name, message } ])\r\n\t\t\t})\r\n\t\t\treturn () => socketRef.current.disconnect()\r\n\t\t},\r\n\t\t[ chat ]\r\n\t)\r\n\r\n\tconst onTextChange = (e) => {\r\n\t\tsetState({ ...state, [e.target.name]: e.target.value })\r\n\t}\r\n\r\n\tconst onMessageSubmit = (e) => {\r\n\t\tconst { name, message } = state\r\n\t\tsocketRef.current.emit(\"message\", { name, message })\r\n\t\te.preventDefault()\r\n\t\tsetState({ message: \"\", name })\r\n\t}\r\n\r\n\tconst renderChat = () => {\r\n\t\treturn chat.map(({ name, message }, index) => (\r\n\t\t\t<div key={index}>\r\n\t\t\t\t<h5>\r\n\t\t\t\t\t{name}: <span>{message}</span>\r\n\t\t\t\t</h5>\r\n\t\t\t</div>\r\n\t\t))\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"card \">\r\n\t\t\t<form onSubmit={onMessageSubmit}>\r\n\t\t\t\t<h1>Messenger</h1>\r\n\t\t\t\t<div className=\"name-field\">\r\n\t\t\t\t\t<TextField name=\"name\" onChange={(e) => onTextChange(e)} value={state.name} label=\"UserName\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<TextField\r\n\t\t\t\t\t\tname=\"message\"\r\n\t\t\t\t\t\tonChange={(e) => onTextChange(e)}\r\n\t\t\t\t\t\tvalue={state.message}\r\n\t\t\t\t\t\tid=\"outlined-multiline-static\"\r\n\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\tlabel=\"Message\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<button>Send Message</button>\r\n\t\t\t</form>\r\n\t\t\t<div className=\"render-chat\">\r\n\t\t\t\t<h1>Chat Log</h1>\r\n\t\t\t\t{renderChat()}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Messenger","import React, { useContext } from 'react';\r\nimport { Grid, Typography, Paper, makeStyles } from '@material-ui/core';\r\nimport {MicOff, Videocam, Mic, ScreenShareSharp,StopScreenShare ,VideocamOffSharp} from '@material-ui/icons';\r\nimport { SocketContext } from '../SocketContext';\r\nimport { Button } from '@material-ui/core';\r\nimport Messenger from './Messenger';\r\n//import { Container } from 'react-bootstrap';\r\nconst useStyles = makeStyles((theme) => ({\r\n  uservideo: {\r\n    width: '650px',\r\n    [theme.breakpoints.down('xs')]: {\r\n      width: '400px',\r\n    },\r\n  },\r\n  myvideo: {\r\n    width: '650px',\r\n    [theme.breakpoints.down('xs')]: {\r\n      width: '400px',\r\n    },\r\n  },\r\n  gridContainer: {\r\n    justifyContent: 'center',\r\n    [theme.breakpoints.down('xs')]: {\r\n      flexDirection: 'column',\r\n    },\r\n  },\r\n  paper: {\r\n    padding: '10px',\r\n    border: '2px solid black',\r\n    margin: '10px',\r\n  },\r\n}));\r\n\r\nconst VideoPlayer = () => {\r\n  const { name, callAccepted, myVideo,\r\n    updateVideo,\r\n    myMicStatus,\r\n     updateMic, userVideo, callEnded, shareScreen, screenShare, stopScreenShare, stream, call } = useContext(SocketContext);\r\n  const classes = useStyles();\r\n\r\n  return (\r\n   \r\n    <Grid container className={classes.gridContainer}>\r\n      {stream && (\r\n          /*Our video*/\r\n        <Paper className={classes.paper}>\r\n          <Grid item xs={6} sm={3}>\r\n            <Typography variant=\"h5\" gutterBottom>{name || 'Name'}</Typography>\r\n            <video playsInline muted ref={myVideo} autoPlay className={classes.myvideo} />\r\n\r\n          </Grid>\r\n          <Button style={{ color: \"grey\" }}>\r\n            <span className=\"icons\" onClick={() => updateVideo()} tabIndex=\"0\">\r\n              {myVideo ? (\r\n                <Videocam style={{ color: \"#108ee9\" }}/>\r\n              ) : (\r\n                <VideocamOffSharp style={{ color: \"red\" }}/>  \r\n              )}\r\n            </span>\r\n            </Button>\r\n          <Button style={{ color: \"grey\" }}>\r\n            <span className=\"icons\" onClick={() => updateMic()} tabIndex=\"0\">\r\n              {myMicStatus ? (\r\n                <Mic style={{ color: \"#108ee9\" }}/>\r\n              ) : (\r\n                <MicOff style={{ color: \"red\" }}/>  \r\n              )}\r\n            </span>\r\n            </Button>\r\n    \r\n            \r\n            {screenShare ? (\r\n                                      <Button style={{ color: \"grey\" }}>\r\n                                      <span className=\"icons\" onClick={() => stopScreenShare()} tabIndex=\"0\">\r\n                                         (\r\n                                          <StopScreenShare style={{ color: \"#108ee9\" }}/>\r\n                                        ) \r\n                                      </span>\r\n                                      </Button>\r\n\r\n\r\n                                  ) : (\r\n                                    <Button style={{ color: \"grey\" }}>\r\n                                      <span className=\"icons\" onClick={() => shareScreen()} tabIndex=\"0\">\r\n                                         (\r\n                                          <ScreenShareSharp style={{ color: \"#108ee9\" }}/>\r\n                                        ) \r\n                                      </span>\r\n                                      </Button>\r\n                                      \r\n                                  )}\r\n          \r\n        </Paper>\r\n      )}\r\n      {callAccepted && !callEnded && (\r\n           /*User's video*/\r\n        <Paper className={classes.paper}>\r\n          <Grid item xs={6} sm={3}>\r\n            <Typography variant=\"h5\" gutterBottom>{call.name || 'Name'}</Typography>\r\n            <video playsInline ref={userVideo} autoPlay className={classes.uservideo} />\r\n          </Grid>\r\n        </Paper>\r\n      )}\r\n      \r\n    <Messenger/>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default VideoPlayer;\r\n\r\n","import React, { useState, useContext } from 'react';\r\nimport { Button, TextField, Grid, Typography, Container, Paper } from '@material-ui/core';\r\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\r\nimport { Assignment, Phone, PhoneDisabled } from '@material-ui/icons';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { createTheme } from '@material-ui/core/styles';\r\nimport { SocketContext } from '../SocketContext';\r\nimport { Card } from 'react-bootstrap';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n  },\r\n  gridContainer: {\r\n    width: '150%',\r\n    [theme.breakpoints.down('xs')]: {\r\n      flexDirection: 'column',\r\n    },\r\n  },\r\n \r\n  container: {\r\n    width: '600px',\r\n    margin: '0px 0',\r\n    padding: 0,\r\n    [theme.breakpoints.down('xs')]: {\r\n      width: '100%',\r\n    },\r\n  },\r\n  margin: {\r\n    marginTop: 20,\r\n  },\r\n  padding: {\r\n    padding: 20,\r\n  },\r\n  paper: {\r\n    padding: '10px 20px',\r\n    border: '2px solid black',\r\n  },\r\n}));\r\n\r\nconst Options = ({ children }) => {\r\n  const { me, callAccepted, name, setName, callEnded, leaveCall, callUser } = useContext(SocketContext);\r\n  const [idToCall, setIdToCall] = useState('');\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.container}>\r\n      <Paper className={classes.paper}>\r\n        <form className={classes.root} noValidate autoComplete=\"off\">\r\n          <Grid container className={classes.gridContainer}>\r\n            <Grid item xs={12} md={6} className={classes.padding}>\r\n              <Typography gutterBottom variant=\"h6\">Account Info</Typography>\r\n              <TextField label=\"Name\" value={name} onChange={(e) => setName(e.target.value)} fullWidth />\r\n              {console.log(me)}\r\n           \r\n\r\n              <CopyToClipboard text={me} className={classes.margin}>\r\n                <Button variant=\"contained\" color=\"primary\"  startIcon={<Assignment fontSize=\"large\" />}>\r\n                  Copy Your ID\r\n                </Button>\r\n               \r\n              </CopyToClipboard>\r\n            </Grid>\r\n            <Grid item xs={12} md={6} className={classes.padding}>\r\n              <Typography gutterBottom variant=\"h6\">Make a call</Typography>\r\n              <TextField label=\"ID to call\" value={idToCall} onChange={(e) => setIdToCall(e.target.value)} fullWidth />\r\n              {callAccepted && !callEnded ? (\r\n                <Button variant=\"contained\" color=\"secondary\" startIcon={<PhoneDisabled fontSize=\"large\" />} fullWidth onClick={leaveCall} className={classes.margin}>\r\n                  Hang Up\r\n                </Button>\r\n              ) : (\r\n                <Button variant=\"contained\" color=\"primary\" startIcon={<Phone fontSize=\"large\" />} onClick={() => callUser(idToCall) } className={classes.margin}>\r\n                  Video Call\r\n                </Button>\r\n              )}\r\n            </Grid>\r\n          </Grid>\r\n        </form>\r\n        {children}\r\n      </Paper>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Options;","import React, { useContext } from 'react';\r\nimport { Button } from '@material-ui/core';\r\n//import {Modal} from 'react-bootstrap';\r\nimport { SocketContext } from '../SocketContext';\r\n\r\n\r\nconst Notifications = () => {\r\n  const { answerCall, call, callAccepted, leaveCall } = useContext(SocketContext);\r\n\r\n  return (\r\n    <>\r\n      {call.isReceivingCall && !callAccepted && (\r\n        <div style={{ display: 'flex', justifyContent: 'space-around' }}>\r\n          <h1>{call.name} is calling :</h1>\r\n          <Button variant=\"contained\" color=\"primary\" onClick={answerCall}>\r\n            Answer\r\n          </Button>\r\n          <Button variant=\"contained\" color=\"secondary\" onClick={leaveCall}>\r\n            Reject\r\n          </Button>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Notifications;\r\n/*\r\nconst Notifications = () => {\r\n  const { answerCall, callUser, call, callAccepted, leaveCall} = useContext(SocketContext);\r\n  const [show, setShow] = useState(false);\r\n\r\n  return (\r\n    <>\r\n    <Button variant=\"primary\" onClick={callUser}>\r\n        Launch demo modal\r\n      </Button>\r\n      {call.isReceivingCall && !callAccepted && (\r\n      <Modal show={show} >\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Modal heading</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n        \r\n        <div style={{ display: 'flex', justifyContent: 'space-around' }}>\r\n          <h1>{call.name} is calling:</h1>\r\n\r\n        </div>\r\n     \r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n        <Button variant=\"contained\" color=\"primary\" onClick={answerCall}>\r\n            Answer\r\n          </Button>\r\n          <Button variant=\"contained\" color=\"secondary\" onClick={leaveCall}>\r\n            Reject\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n       )}\r\n     \r\n    </>\r\n  );\r\n};\r\n\r\n*/","import React from \"react\";\nimport { v1 as uuid } from \"uuid\";\n\nconst CreateRoom = (props) => {\n    function create() {\n        const id = uuid();\n        props.history.push(`/room/${id}`);\n    }\n\n    return (\n        <button onClick={create}>Create room</button>\n    );\n};\n\nexport default CreateRoom;\n","import React, { useEffect, useRef, useState } from \"react\";\nimport io from \"socket.io-client\";\nimport Peer from \"simple-peer\";\nimport styled from \"styled-components\";\n\nconst Container = styled.div`\n    padding: 20px;\n    display: flex;\n    height: 100vh;\n    width: 90%;\n    margin: auto;\n    flex-wrap: wrap;\n`;\n\nconst StyledVideo = styled.video`\n    height: 40%;\n    width: 50%;\n`;\n\nconst Video = (props) => {\n    const ref = useRef();\n\n    useEffect(() => {\n        props.peer.on(\"stream\", stream => {\n            ref.current.srcObject = stream;\n        })\n    }, []);\n\n    return (\n        <StyledVideo playsInline autoPlay ref={ref} />\n    );\n}\n\n\nconst videoConstraints = {\n    height: window.innerHeight / 2,\n    width: window.innerWidth / 2\n};\n\nconst Room = (props) => {\n    const [peers, setPeers] = useState([]);\n    const socketRef = useRef();\n    const userVideo = useRef();\n    const peersRef = useRef([]);\n   // const roomID = props.match.params.roomID;\n\n    useEffect(() => {\n        socketRef.current = io.connect(\"/\");\n        navigator.mediaDevices.getUserMedia({ video: videoConstraints, audio: true }).then(stream => {\n            userVideo.current.srcObject = stream;\n            socketRef.current.emit(\"join room\");\n            socketRef.current.on(\"all users\", users => {\n                const peers = [];\n                users.forEach(userID => {\n                    const peer = createPeer(userID, socketRef.current.id, stream);\n                    peersRef.current.push({\n                        peerID: userID,\n                        peer,\n                    })\n                    peers.push(peer);\n                })\n                setPeers(peers);\n            })\n\n            socketRef.current.on(\"user joined\", payload => {\n                const peer = addPeer(payload.signal, payload.callerID, stream);\n                peersRef.current.push({\n                    peerID: payload.callerID,\n                    peer,\n                })\n\n                setPeers(users => [...users, peer]);\n            });\n\n            socketRef.current.on(\"receiving returned signal\", payload => {\n                const item = peersRef.current.find(p => p.peerID === payload.id);\n                item.peer.signal(payload.signal);\n            });\n        })\n    }, []);\n\n    function createPeer(userToSignal, callerID, stream) {\n        const peer = new Peer({\n            initiator: true,\n            trickle: false,\n            stream,\n        });\n\n        peer.on(\"signal\", signal => {\n            socketRef.current.emit(\"sending signal\", { userToSignal, callerID, signal })\n        })\n\n        return peer;\n    }\n\n    function addPeer(incomingSignal, callerID, stream) {\n        const peer = new Peer({\n            initiator: false,\n            trickle: false,\n            stream,\n        })\n\n        peer.on(\"signal\", signal => {\n            socketRef.current.emit(\"returning signal\", { signal, callerID })\n        })\n\n        peer.signal(incomingSignal);\n\n        return peer;\n    }\n\n    return (\n        <Container>\n            <StyledVideo muted ref={userVideo} autoPlay playsInline />\n            {peers.map((peer, index) => {\n                return (\n                    <Video key={index} peer={peer} />\n                );\n            })}\n        </Container>\n    );\n};\n\nexport default Room;\n","import React, { useContext,useState } from 'react';\r\nimport { Button } from '@material-ui/core';\r\nimport {Navbar, Nav, Form, FormControl} from 'react-bootstrap';\r\nimport { SocketContext } from '../SocketContext';\r\nimport { Assignment, Phone, PhoneDisabled } from '@material-ui/icons';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { createTheme } from '@material-ui/core/styles';\r\n\r\nimport { Card } from 'react-bootstrap';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n  },\r\n  gridContainer: {\r\n    width: '150%',\r\n    [theme.breakpoints.down('xs')]: {\r\n      flexDirection: 'column',\r\n    },\r\n  },\r\n \r\n  container: {\r\n    width: '600px',\r\n    margin: '0px 0',\r\n    padding: 0,\r\n    [theme.breakpoints.down('xs')]: {\r\n      width: '100%',\r\n    },\r\n  },\r\n  margin: {\r\n    marginTop: 20,\r\n  },\r\n  padding: {\r\n    padding: 20,\r\n  },\r\n  paper: {\r\n    padding: '10px 20px',\r\n    border: '2px solid black',\r\n  },\r\n  wrapper: {\r\n    \r\n    width: '100%',\r\n  },\r\n}));\r\n\r\nconst Nav_bar = () => {\r\n  const { answerCall,callEnded, call, callAccepted, leaveCall } = useContext(SocketContext);\r\n  const classes = useStyles();\r\n  return (\r\n    <>\r\n      \r\n      <div className={classes.wrapper}>\r\n  <Navbar bg=\"primary\" variant=\"dark\">\r\n    <Navbar.Brand href=\"#\">Video Chat App</Navbar.Brand>\r\n    <Nav className=\"mr-auto\">\r\n      <Nav.Link href=\"/room\">Room</Nav.Link>\r\n    </Nav>\r\n    <div>\r\n    {callAccepted && !callEnded ? (\r\n                <Button variant=\"contained\" color=\"secondary\" startIcon={<PhoneDisabled fontSize=\"large\" />} onClick={leaveCall} className={classes.margin}>\r\n                  Hang Up\r\n                </Button>\r\n              ) : (\r\n                <div></div>\r\n              )}\r\n         </div>     \r\n  </Navbar></div>\r\n\r\n  \r\n\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Nav_bar;","\r\nimport React from 'react';\r\nimport { Typography, AppBar } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport VideoPlayer from './components/VideoPlayer';\r\nimport Options from './components/Options';\r\nimport Notifications from './components/Notifications';\r\n//import Messenger from './components/Messenger';\r\nimport { BrowserRouter, Route, Switch } from \"react-router-dom\";\r\nimport CreateRoom from \"./routes/CreateRoom\";\r\nimport Room from \"./routes/Room\";\r\nimport Nav_bar from './components/Navbar';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    borderRadius: 15,\r\n    margin: '30px 100px',\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n    justifyContent: 'center',\r\n    alignItems: 'left',\r\n    width: '600px',\r\n    border: '2px solid black',\r\n    backgroundcolor: 'pink',\r\n    [theme.breakpoints.down('xs')]: {\r\n      width: '90%',\r\n    },\r\n  },\r\n  image: {\r\n    marginLeft: '15px',\r\n  },\r\n  wrapper: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n    width: '100%',\r\n  },\r\n}));\r\n\r\nconst App = () => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n\r\n    <div className={classes.wrapper}>\r\n     <Nav_bar/>\r\n     <BrowserRouter>\r\n      <Switch>\r\n        <Route path=\"/\" exact component={CreateRoom} />\r\n        <Route path=\"/room/:roomID\" component={Room} />\r\n      </Switch>\r\n    </BrowserRouter>\r\n      \r\n      <VideoPlayer />\r\n      <Notifications />\r\n      <Options/>\r\n       \r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n\r\n\r\n/*<AppBar className={classes.appBar} position=\"static\" color=\"inherit\">\r\n        <Typography variant=\"h2\" align=\"center\">Video Chat</Typography>\r\n      </AppBar>*/","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport App from './App';\r\nimport { ContextProvider } from './SocketContext';\r\nimport './styles.css';\r\n\r\n\r\nReactDOM.render(\r\n  \r\n  <ContextProvider>\r\n    <App />\r\n  </ContextProvider>,\r\n  document.getElementById('root'),\r\n);\r\n"],"sourceRoot":""}